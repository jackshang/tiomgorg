'use strict';var SZJ={L:0,fa:0,dt:0,E:.409092614,getH:function(b,a){b=(Math.sin(b)-Math.sin(this.fa)*Math.sin(a))/Math.cos(this.fa)/Math.cos(a);return 1<Math.abs(b)?Math.PI:Math.acos(b)},Mcoord:function(b,a,e){var c=m_coord((b+this.dt)/36525,40,30,8);c=llrConv(c,this.E);e.H=rad2rrad(pGST(b,this.dt)+this.L-c[0]);a&&(e.H0=this.getH(.7275*cs_rEar/c[2]-2040/rad,c[1]))},Mt:function(b){this.dt=dt_T(b);this.E=hcjj(b/36525);b-=mod2(.1726222+.966136808032357*b-.0366*this.dt+this.L/pi2,1);var a=[],e=.966*pi2;
a.z=a.x=a.s=a.j=a.c=a.h=b;this.Mcoord(b,1,a);a.s+=(-a.H0-a.H)/e;a.j+=(a.H0-a.H)/e;a.z+=(0-a.H)/e;a.x+=(Math.PI-a.H)/e;this.Mcoord(a.s,1,a);a.s+=rad2rrad(-a.H0-a.H)/e;this.Mcoord(a.j,1,a);a.j+=rad2rrad(+a.H0-a.H)/e;this.Mcoord(a.z,0,a);a.z+=rad2rrad(0-a.H)/e;this.Mcoord(a.x,0,a);a.x+=rad2rrad(Math.PI-a.H)/e;return a},Scoord:function(b,a,e){var c=[XL.E_Lon((b+this.dt)/36525,5)+Math.PI-20.5/rad,0,1];c=llrConv(c,this.E);e.H=rad2rrad(pGST(b,this.dt)+this.L-c[0]);if(10==a||1==a)e.H1=this.getH(-3E3/rad,
c[1]);if(10==a||2==a)e.H2=this.getH(-21600/rad,c[1]);if(10==a||3==a)e.H3=this.getH(-43200/rad,c[1]);if(10==a||4==a)e.H4=this.getH(-64800/rad,c[1])},St:function(b){this.dt=dt_T(b);this.E=hcjj(b/36525);b-=mod2(b+this.L/pi2,1);var a=[],e=pi2;a.z=a.x=a.s=a.j=a.c=a.h=a.c2=a.h2=a.c3=a.h3=b;a.sm="";this.Scoord(b,10,a);a.s+=(-a.H1-a.H)/e;a.j+=(a.H1-a.H)/e;a.c+=(-a.H2-a.H)/e;a.h+=(a.H2-a.H)/e;a.c2+=(-a.H3-a.H)/e;a.h2+=(a.H3-a.H)/e;a.c3+=(-a.H4-a.H)/e;a.h3+=(a.H4-a.H)/e;a.z+=(0-a.H)/e;a.x+=(Math.PI-a.H)/e;
this.Scoord(a.s,1,a);a.s+=rad2rrad(-a.H1-a.H)/e;a.H1==Math.PI&&(a.sm+="\u65e0\u5347\u8d77.");this.Scoord(a.j,1,a);a.j+=rad2rrad(+a.H1-a.H)/e;a.H1==Math.PI&&(a.sm+="\u65e0\u964d\u843d.");this.Scoord(a.c,2,a);a.c+=rad2rrad(-a.H2-a.H)/e;a.H2==Math.PI&&(a.sm+="\u65e0\u6c11\u7528\u6668.");this.Scoord(a.h,2,a);a.h+=rad2rrad(+a.H2-a.H)/e;a.H2==Math.PI&&(a.sm+="\u65e0\u6c11\u7528\u660f.");this.Scoord(a.c2,3,a);a.c2+=rad2rrad(-a.H3-a.H)/e;a.H3==Math.PI&&(a.sm+="\u65e0\u822a\u6d77\u6668.");this.Scoord(a.h2,
3,a);a.h2+=rad2rrad(+a.H3-a.H)/e;a.H3==Math.PI&&(a.sm+="\u65e0\u822a\u6d77\u660f.");this.Scoord(a.c3,4,a);a.c3+=rad2rrad(-a.H4-a.H)/e;a.H4==Math.PI&&(a.sm+="\u65e0\u5929\u6587\u6668.");this.Scoord(a.h3,4,a);a.h3+=rad2rrad(+a.H4-a.H)/e;a.H4==Math.PI&&(a.sm+="\u65e0\u5929\u6587\u660f.");this.Scoord(a.z,0,a);a.z+=(0-a.H)/e;this.Scoord(a.x,0,a);a.x+=rad2rrad(Math.PI-a.H)/e;return a},rts:[],calcRTS:function(b,a,e,c,d){var f;if(!this.rts.length)for(f=0;31>f;f++)this.rts[f]=[];this.L=e;this.fa=c;d/=24;for(f=
0;f<a;f++)c=this.rts[f],c.Ms=c.Mz=c.Mj="--:--:--";for(f=-1;f<=a;f++)0<=f&&f<a&&(c=SZJ.St(b+f+d),this.rts[f].s=JD.timeStr(c.s-d),this.rts[f].z=JD.timeStr(c.z-d),this.rts[f].j=JD.timeStr(c.j-d),this.rts[f].c=JD.timeStr(c.c-d),this.rts[f].h=JD.timeStr(c.h-d),this.rts[f].ch=JD.timeStr(c.h-c.c-.5),this.rts[f].sj=JD.timeStr(c.j-c.s-.5)),c=SZJ.Mt(b+f+d),e=int2(c.s-d+.5)-b,0<=e&&e<a&&(this.rts[e].Ms=JD.timeStr(c.s-d)),e=int2(c.z-d+.5)-b,0<=e&&e<a&&(this.rts[e].Mz=JD.timeStr(c.z-d)),e=int2(c.j-d+.5)-b,0<=
e&&e<a&&(this.rts[e].Mj=JD.timeStr(c.j-d));this.rts.dn=a}};function xingJJ(b,a,e){var c=p_coord(0,a,10,10,10);var d=p_coord(b,a,10,10,10);d=h2g(d,c);1==e&&(c=p_coord(0,a,60,60,60),d=p_coord(b,a,60,60,60),d=h2g(d,c));2<=e&&(c=p_coord(0,a-c[2]*cs_Agx,-1,-1,-1),d=p_coord(b,a-d[2]*cs_Agx,-1,-1,-1),d=h2g(d,c));c[0]+=Math.PI;c[1]=-c[1];return j1_j2(d[0],d[1],c[0],c[1])}
function daJu(b,a,e){if(1==b){var c=.0031725524369226555;var d=[2,.2,.01,46,87]}2==b&&(c=.015986895847351128,d=[4,.2,.01,382,521]);e=e?d[3]/36525:d[4]/36525;a=e+c*int2((a-e)/c+.5);for(c=0;3>c;c++){e=d[c]/36525;var f=xingJJ(b,a-e,c);var g=xingJJ(b,a,c);var h=xingJJ(b,a+e,c);a+=(f-h)/(f+h-2*g)*e/2}return[a,g+(f-h)/(f+h-2*g)*(h-f)/8]}function xingLiu0(b,a,e,c){var d=hcjj(a);var f=p_coord(0,a-c,e,e,e);b=p_coord(b,a-c,e,e,e);b=h2g(b,f);c&&(a=nutation2(a),b[0]+=a[0],d+=a[1]);return b=llrConv(b,d)}
function xingLiu(b,a,e){var c,d=pi2/(cs_xxHH[b-1]/36525);2<b&&(d=-d);for(c=0;6>c;c++)a-=rad2rrad(XL0_calc(b,0,a,8)-XL0_calc(0,0,a,8))/d;d=[5/36525,1/36525,.5/36525,2E-6,2E-6];c=[17.4,28,52,82,86,88,89,90];c=c[b-1]/36525;a=e?2<b?a-c:a+c:2<b?a+c:a-c;for(c=0;4>c;c++){var f=d[c];var g=8;var h=0;3<=c&&(h=k[2]*cs_Agx,g=-1);e=xingLiu0(b,a-f,g,h);var k=xingLiu0(b,a,g,h);g=xingLiu0(b,a+f,g,h);a+=(e[0]-g[0])/(e[0]+g[0]-2*k[0])*f/2}return a}
function xingMP(b,a,e,c,d){var f=p_coord(0,a-d[1],e,e,e);b=p_coord(b,a-d[1],e,e,e);a=m_coord(a-d[0],e,e,e);b=h2g(b,f);a[0]+=d[2];b[0]+=d[2];a=llrConv(a,c+d[3]);b=llrConv(b,c+d[3]);return[rad2rrad(a[0]-b[0]),a[1]-b[1],a[2]/cs_GS/86400/36525,b[2]/cs_GS/86400/36525*cs_AU]}
function xingHY(b,a){var e,c=[0,0,0,0];for(e=0;3>e;e++){var d=xingMP(b,a,8,.4091,c);a-=d[0]/8192}e=hcjj(a);c=nutation2(a);c=[d[2],d[3],c[0],c[1]];d=xingMP(b,a,8,e,c);var f=(xingMP(b,a+1E-6,8,e,c)[0]-d[0])/1E-6;d=xingMP(b,a,30,e,c);a-=d[0]/f;d=xingMP(b,a,-1,e,c);a-=d[0]/f;return[a,d[1]]}function xingSP(b,a,e,c,d,f){var g=p_coord(0,a-f,e,e,e);b=p_coord(b,a-f,e,e,e);a=p_coord(0,a-d,e,e,e);a[0]+=Math.PI;a[1]=-a[1];b=h2g(b,g);return[rad2rrad(b[0]-a[0]-c),b[1]-a[1],a[2]*cs_Agx,b[2]*cs_Agx]}
function xingHR(b,a,e){var c;var d=Math.PI;var f=0;e&&(d=0,2<b&&(f=Math.PI));e=pi2/cs_xxHH[b-1]*36525;2<b&&(e=-e);for(c=0;6>c;c++)a-=rad2rrad(XL0_calc(b,0,a,8)-XL0_calc(0,0,a,8)-d)/e;d=xingSP(b,a,8,f,0,0);e=(xingSP(b,a+2E-5,8,f,0,0)[0]-d[0])/2E-5;d=xingSP(b,a,40,f,d[2],d[3]);a-=d[0]/e;d=xingSP(b,a,-1,f,d[2],d[3]);a-=d[0]/e;return[a,d[1]]}
function xingX(b,a,e,c){var d=a/36525,f=nutation2(d),g=f[0];f=f[1];f=hcjj(d)+f;a=pGST2(a);var h=a+g*Math.cos(f),k="",l=8;if(10==b){l=2;var m=e_coord(d,15,15,15);var n=m_coord(d,1,1,-1);var q=n[2];d-=q*cs_Agx/cs_AU;var p=e_coord(d,15,15,15);n=m_coord(d,-1,-1,-1);var r=n[2];p=h2g(m,p);p[2]*=cs_AU;var t=h2g(n,p);m=t[2];n[0]=rad2mrad(n[0]+g);k+="\u89c6\u9ec4\u7ecf "+rad2str(n[0],0)+" \u89c6\u9ec4\u7eac "+rad2str(n[1],0)+" \u5730\u5fc3\u8ddd "+q.toFixed(l)+"\r\n";n=llrConv(n,f);k+="\u89c6\u8d64\u7ecf "+
rad2str(n[0],1)+" \u89c6\u8d64\u7eac "+rad2str(n[1],0)+" \u5149\u884c\u8ddd "+m.toFixed(l)+"\r\n"}10>b&&(m=p_coord(0,d,-1,-1,-1),n=p_coord(b,d,-1,-1,-1),n[0]=rad2mrad(n[0]),k+="\u9ec4\u7ecf\u4e00 "+rad2str(n[0],0)+" \u9ec4\u7eac\u4e00 "+rad2str(n[1],0)+" \u5411\u5f84\u4e00 "+n[2].toFixed(l)+"\r\n",n=h2g(n,m),q=n[2],d-=q*cs_Agx,p=p_coord(0,d,-1,-1,-1),t=p_coord(b,d,-1,-1,-1),n=h2g(t,m),m=n[2],n=h2g(t,p),r=n[2],n[0]=rad2mrad(n[0]+g),k+="\u89c6\u9ec4\u7ecf "+rad2str(n[0],0)+" \u89c6\u9ec4\u7eac "+rad2str(n[1],
0)+" \u5730\u5fc3\u8ddd "+q.toFixed(l)+"\r\n",n=llrConv(n,f),k+="\u89c6\u8d64\u7ecf "+rad2str(n[0],1)+" \u89c6\u8d64\u7eac "+rad2str(n[1],0)+" \u5149\u884c\u8ddd "+m.toFixed(l)+"\r\n");b=rad2rrad(h+e-n[0]);parallax(n,b,c,0);k+="\u7ad9\u8d64\u7ecf "+rad2str(n[0],1)+" \u7ad9\u8d64\u7eac "+rad2str(n[1],0)+" \u89c6\u8ddd\u79bb "+r.toFixed(l)+"\r\n";n[0]+=Math.PI/2-h-e;n=llrConv(n,Math.PI/2-c);n[0]=rad2mrad(Math.PI/2-n[0]);0<n[1]&&(n[1]+=MQC(n[1]));k+="\u65b9\u4f4d\u89d2 "+rad2str(n[0],0)+" \u9ad8\u5ea6\u89d2 "+
rad2str(n[1],0)+"\r\n";return k+="\u6052\u661f\u65f6 "+rad2str(rad2mrad(a),1)+"(\u5e73) "+rad2str(rad2mrad(h),1)+"(\u771f)\r\n"}function lineEll(b,a,e,c,d,f,g,h){c-=b;d-=a;f-=e;var k=g*g;g={};var l=c*c+d*d+f*f/k;var m=b*c+a*d+e*f/k;g.D=m*m-l*(b*b+a*a+e*e/k-h*h);if(0>g.D)return g;h=sqrt(g.D);0>m&&(h=-h);h=(-m+h)/l;g.x=b+c*h;g.y=a+d*h;g.z=e+f*h;b=sqrt(c*c+d*d+f*f);g.R1=b*abs(h);g.R2=b*abs(h-1);return g}
function lineEar2(b,a,e,c,d,f,g,h,k){var l=cos(k[1]),m=sin(k[1]);b=lineEll(b,l*a-m*e,m*a+l*e,c,l*d-m*f,m*d+l*f,g,h);b.J=b.W=100;if(0>b.D)return b;b.J=rad2rrad(atan2(b.y,b.x)+k[0]-k[2]);b.W=atan(b.z/g/g/sqrt(b.x*b.x+b.y*b.y));return b}function lineEar(b,a,e){b=llr2xyz(b);a=llr2xyz(a);a=lineEll(b[0],b[1],b[2],a[0],a[1],a[2],cs_ba,cs_rEar);if(0>a.D)return a.J=a.W=100,a;a.W=atan(a.z/cs_ba2/sqrt(a.x*a.x+a.y*a.y));a.J=rad2rrad(atan2(a.y,a.x)-e);return a}
function cirOvl(b,a,e,c,d){var f={},g=sqrt(c*c+d*d);d/=g;c/=g;var h=(b*b+g*g-e*e)/(2*g*b);if(1<abs(h))return f.n=0,f;var k=Math.sqrt(1-h*h),l=a*a;for(a=-1;2>a;a+=2){var m=h*d+k*c*a;var n=b-m*m*(1/l-1)/2;h=(n*n+g*g-e*e)/(2*g*n);if(1<Math.abs(h))return f.n=0,f;k=Math.sqrt(1-h*h);var q=h*c-k*d*a;m=h*d+k*c*a;1==a?f.A=[n*q,n*m]:f.B=[n*q,n*m]}f.n=2;return f}
function lineOvl(b,a,e,c,d,f){var g={};var h=f*f;f=e*e+c*c/h;var k=b*e+a*c/h;h=k*k-f*(b*b+a*a/h-d*d);if(0>h)return g.n=0,g;g.n=h?2:1;h=Math.sqrt(h);d=(-k+h)/f;f=(-k-h)/f;g.A=[b+e*d,a+c*d];g.B=[b+e*f,a+c*f];b=sqrt(e*e+c*c);g.R1=b*Math.abs(d);g.R2=b*Math.abs(f);return g}
var msc={calc:function(b,a,e,c){this.T=b;this.L=a;this.fa=e;this.dt=dt_T(b);this.jd=b-this.dt;b/=36525;var d=nutation2(b);this.dL=d[0];this.dE=d[1];this.E=hcjj(b)+this.dE;this.gst=pGST(this.jd,this.dt)+this.dL*Math.cos(this.E);d=m_coord(b,-1,-1,-1);d[0]=rad2mrad(d[0]+gxc_moonLon(b)+this.dL);d[1]+=gxc_moonLat(b);this.mHJ=d[0];this.mHW=d[1];this.mR=d[2];d=llrConv(d,this.E);this.mCJ=d[0];this.mCW=d[1];this.mShiJ=rad2mrad(this.gst+a-d[0]);this.mShiJ>Math.PI&&(this.mShiJ-=pi2);parallax(d,this.mShiJ,e,
c);this.mCJ2=d[0];this.mCW2=d[1];this.mR2=d[2];d[0]+=Math.PI/2-this.gst-a;d=llrConv(d,Math.PI/2-e);d[0]=rad2mrad(Math.PI/2-d[0]);this.mDJ=d[0];this.mDW=d[1];0<d[1]&&(d[1]+=MQC(d[1]));this.mPJ=d[0];this.mPW=d[1];d=e_coord(b,-1,-1,-1);d[0]=rad2mrad(d[0]+Math.PI+gxc_sunLon(b)+this.dL);d[1]=-d[1]+gxc_sunLat(b);this.sHJ=d[0];this.sHW=d[1];this.sR=d[2];d=llrConv(d,this.E);this.sCJ=d[0];this.sCW=d[1];this.sShiJ=rad2mrad(this.gst+a-d[0]);this.sShiJ>Math.PI&&(this.sShiJ-=pi2);parallax(d,this.sShiJ,e,c);this.sCJ2=
d[0];this.sCW2=d[1];this.sR2=d[2];d[0]+=Math.PI/2-this.gst-a;d=llrConv(d,Math.PI/2-e);d[0]=rad2mrad(Math.PI/2-d[0]);this.sDJ=d[0];this.sDW=d[1];0<d[1]&&(d[1]+=MQC(d[1]));this.sPJ=d[0];this.sPW=d[1];e=b/10;c=e*e;d=c*e;var f=d*e;e=(1753470142+6283319653318*e+529674*c+432*d-1124*f-9*f*e)/1E9+Math.PI-20.5/rad;e=rad2mrad(e-(this.sCJ-this.dL*Math.cos(this.E)));e>Math.PI&&(e-=pi2);this.sc=e/pi2;this.pty=this.jd+a/pi2;this.zty=this.jd+a/pi2+this.sc;this.mRad=cs_sMoon/this.mR2;this.sRad=959.63/this.sR2;this.e_mRad=
cs_sMoon/this.mR;this.eShadow=51*(cs_rEarA/this.mR*rad-950.836/this.sR)/50;this.eShadow2=51*(cs_rEarA/this.mR*rad+968.424/this.sR)/50;this.mIll=XL.moonIll(b);Math.abs(rad2rrad(this.mCJ-this.sCJ))<50/180*Math.PI?(b=lineEar([this.mCJ,this.mCW,this.mR],[this.sCJ,this.sCW,this.sR*cs_AU],this.gst),this.zx_J=b.J,this.zx_W=b.W):this.zx_J=this.zx_W=100},toHTML:function(b){var a='\x3ctable width\x3d"100%" cellspacing\x3d1 cellpadding\x3d0 bgcolor\x3d"#FFC0C0"\x3e\x3ctr\x3e\x3ctd bgcolor\x3dwhite align\x3dcenter\x3e\u5e73\u592a\u9633 '+
(JD.timeStr(this.pty)+" \u771f\u592a\u9633 \x3cfont color\x3dred\x3e"+JD.timeStr(this.zty)+"\x3c/font\x3e\x3cbr\x3e");a+="\u65f6\u5dee "+m2fm(86400*this.sc,2,1)+" \u6708\u4eae\u88ab\u7167\u4eae "+(100*this.mIll).toFixed(2)+"% ";a=a+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd bgcolor\x3dwhite\x3e\x3ccenter\x3e\x3cpre style\x3d"margin-top: 0; margin-bottom: 0"\x3e\x3cfont color\x3dblue\x3e\x3cb\x3e\u8868\u4e00       \u6708\u4eae            \u592a\u9633\x3c/b\x3e\x3c/font\x3e\r\n\u89c6\u9ec4\u7ecf '+(rad2str(this.mHJ,
0)+"  "+rad2str(this.sHJ,0)+"\r\n");a+="\u89c6\u9ec4\u7eac "+rad2str(this.mHW,0)+"  "+rad2str(this.sHW,0)+"\r\n";a+="\u89c6\u8d64\u7ecf "+rad2str(this.mCJ,1)+"  "+rad2str(this.sCJ,1)+"\r\n";a+="\u89c6\u8d64\u7eac "+rad2str(this.mCW,0)+"  "+rad2str(this.sCW,0)+"\r\n";a+="\u8ddd\u79bb     "+this.mR.toFixed(2)+"\u5343\u7c73     "+this.sR.toFixed(8)+"AU\r\n";a=a+'\x3c/pre\x3e\x3c/center\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd bgcolor\x3dwhite\x3e\x3ccenter\x3e\x3cpre style\x3d"margin-top: 0; margin-bottom: 0"\x3e\x3cfont color\x3dblue\x3e\x3cb\x3e\u8868\u4e8c       \u6708\u4eae            \u592a\u9633\x3c/b\x3e\x3c/font\x3e\r\n\u65b9\u4f4d\u89d2 '+
(rad2str(this.mPJ,0)+"  "+rad2str(this.sPJ,0)+"\r\n");a+="\u9ad8\u5ea6\u89d2 "+rad2str(this.mPW,0)+"  "+rad2str(this.sPW,0)+"\r\n";a+="\u65f6\u89d2   "+rad2str(this.mShiJ,0)+"  "+rad2str(this.sShiJ,0)+"\r\n";a+="\u89c6\u534a\u5f84(\u89c2\u6d4b\u70b9) "+m2fm(this.mRad,2,0)+"     "+m2fm(this.sRad,2,0)+"\r\n";a+="\x3c/pre\x3e\x3c/center\x3e\x3c/td\x3e\x3c/tr\x3e";b&&(a=a+"\x3ctr\x3e\x3ctd bgcolor\x3dwhite align\x3dcenter\x3e\u529b\u5b66\u65f6 "+JD.JD2str(this.T+J2000),a+=" \u0394T\x3d"+(86400*this.dt).toFixed(1)+
"\u79d2\x3cbr\x3e",a+="\u9ec4\u7ecf\u7ae0 "+(this.dL/pi2*1296E3).toFixed(2)+'" ',a+="\u4ea4\u89d2\u7ae0 "+(this.dE/pi2*1296E3).toFixed(2)+'" ',a+="\u03b5\x3d"+rad2str(this.E,0),a+="\x3c/td\x3e\x3c/tr\x3e");return a+"\x3c/table\x3e"}},ysPL={lineT:function(b,a,e,c,d){var f=b.y*a-b.x*e,g=e*e+a*a;e*=f;c=e*e-g*(f*f-c*c*a*a);if(0>c)return 0;c=Math.sqrt(c);d||(c=-c);return b.t+((-e+c)/g-b.x)/a},lecXY:function(b,a){var e=b/36525;var c=e_coord(e,-1,-1,-1);c[0]=rad2mrad(c[0]+Math.PI+gxc_sunLon(e));c[1]=-c[1]+
gxc_sunLat(e);var d=m_coord(e,-1,-1,-1);d[0]=rad2mrad(d[0]+gxc_moonLon(e));d[1]+=gxc_moonLat(e);a.e_mRad=cs_sMoon/d[2];a.eShadow=51*(cs_rEarA/d[2]*rad-950.836/c[2])/50;a.eShadow2=51*(cs_rEarA/d[2]*rad+968.424/c[2])/50;a.x=rad2rrad(d[0]+Math.PI-c[0])*Math.cos((d[1]-c[1])/2);a.y=d[1]+c[1];a.mr=a.e_mRad/rad;a.er=a.eShadow/rad;a.Er=a.eShadow2/rad;a.t=b},lecMax:function(b){this.lT=[];for(var a=0;7>a;a++)this.lT[a]=0;this.sf=0;this.LX="";b=36525*XL.MS_aLon_t2(Math.floor((b-4)/29.5306)*Math.PI*2+Math.PI);
a={};var e={};var c=-4262.6449*Math.sin(.057109+.23089571958*b)/rad;var d=(XL.M_v(b/36525)-XL.E_v(b/36525))/36525;this.lecXY(b,e);b-=(e.y*c+e.x*d)/(c*c+d*d);var f=60/86400;this.lecXY(b,e);this.lecXY(b+f,a);c=(a.y-e.y)/f;d=(a.x-e.x)/f;f=-(e.y*c+e.x*d)/(c*c+d*d);b+=f;var g=e.x+f*d;f=e.y+f*c;g=Math.sqrt(g*g+f*f);g<=e.mr+e.er&&(this.lT[1]=b,this.LX="\u504f",this.sf=(e.mr+e.er-g)/e.mr/2,this.lT[0]=this.lineT(e,d,c,e.mr+e.er,0),this.lecXY(this.lT[0],a),this.lT[0]=this.lineT(a,d,c,a.mr+a.er,0),this.lT[2]=
this.lineT(e,d,c,e.mr+e.er,1),this.lecXY(this.lT[2],a),this.lT[2]=this.lineT(a,d,c,a.mr+a.er,1));g<=e.mr+e.Er&&(this.lT[3]=this.lineT(e,d,c,e.mr+e.Er,0),this.lecXY(this.lT[3],a),this.lT[3]=this.lineT(a,d,c,a.mr+a.Er,0),this.lT[4]=this.lineT(e,d,c,e.mr+e.Er,1),this.lecXY(this.lT[4],a),this.lT[4]=this.lineT(a,d,c,a.mr+a.Er,1));g<=e.er-e.mr&&(this.LX="\u5168",this.lT[5]=this.lineT(e,d,c,e.er-e.mr,0),this.lecXY(this.lT[5],a),this.lT[5]=this.lineT(a,d,c,a.er-a.mr,0),this.lT[6]=this.lineT(e,d,c,e.er-e.mr,
1),this.lecXY(this.lT[6],a),this.lT[6]=this.lineT(a,d,c,a.er-a.mr,1))}};
function ecFast(b){var a={};var e=Math.floor((b+8)/29.5306)*Math.PI*2;var c=(e+1.08472)/7771.37714500204;a.jd=a.jdSuo=36525*c;var d=c*c;var f=d*c;f=(93.2720993+483202.0175273*c-.0034029*d-f/3526E3+f*c/86331E4)/180*Math.PI;a.ac=1;a.lx="N";if(.4<Math.abs(Math.sin(f)))return a;c-=(-3.31E-5*c*c+.10976*Math.cos(.785+8328.6914*c))/7771;d=c*c;f=-1.084719+7771.377145013*c-3.31E-5*d+(22640*Math.cos(.785+8328.6914*c+1.52E-4*d)+4586*Math.cos(.19+7214.063*c-2.18E-4*d)+2370*Math.cos(2.54+15542.754*c-7E-5*d)+769*
Math.cos(3.1+16657.383*c)+666*Math.cos(1.5+628.302*c)+412*Math.cos(4.8+16866.93*c)+212*Math.cos(4.1-1114.63*c)+205*Math.cos(.2+6585.76*c)+192*Math.cos(4.9+23871.45*c)+165*Math.cos(2.6+14914.45*c)+147*Math.cos(5.5-7700.39*c)+125*Math.cos(.5+7771.38*c)+109*Math.cos(3.9+8956.99*c)+55*Math.cos(5.6-1324.18*c)+45*Math.cos(.9+25195.62*c)+40*Math.cos(3.8-8538.24*c)+38*Math.cos(4.3+22756.82*c)+36*Math.cos(5.5+24986.07*c)-6893*Math.cos(4.669257+628.3076*c)-72*Math.cos(4.6261+1256.62*c)-43*Math.cos(2.67823+
628.31*c)*c+21)/rad;c+=(e-f)/(7771.38-914*Math.sin(.7848+8328.691425*c+1.523E-4*d)-179*Math.sin(2.543+15542.7543*c)-160*Math.sin(.1874+7214.0629*c));a.jd=a.jdSuo=b=36525*c;d=c*c/1E4;f=d*c/1E4;e=18461*Math.cos(.0571+8433.46616*c-.64*d-1*f)+1010*Math.cos(2.413+16762.1576*c+.88*d+25*f)+1E3*Math.cos(5.44-104.7747*c+2.16*d+26*f)+624*Math.cos(.915+7109.2881*c+0*d+7*f)+199*Math.cos(1.82+15647.529*c-2.8*d-19*f)+167*Math.cos(4.84-1219.403*c-1.5*d-18*f)+117*Math.cos(4.17+23976.22*c-1.3*d+6*f)+62*Math.cos(4.8+
25090.849*c+2*d+50*f)+33*Math.cos(3.3+15437.98*c+2*d+32*f)+32*Math.cos(1.5+8223.917*c+4*d+51*f)+30*Math.cos(1+6480.986*c+0*d+7*f)+16*Math.cos(2.5-9548.095*c-3*d-43*f)+15*Math.cos(.2+32304.912*c+0*d+31*f)+12*Math.cos(4+7737.59*c)+9*Math.cos(1.9+15019.227*c)+8*Math.cos(5.4+8399.709*c)+8*Math.cos(4.2+23347.918*c)+7*Math.cos(4.9-1847.705*c)+7*Math.cos(3.8-16133.856*c)+7*Math.cos(2.7+14323.351*c);e/=rad;f=385001+20905*Math.cos(5.4971+8328.691425*c+1.52*d+25*f)+3699*Math.cos(4.9+7214.06287*c-2.18*d-19*
f)+2956*Math.cos(.972+15542.75429*c-.66*d+6*f)+570*Math.cos(1.57+16657.3828*c+3*d+50*f)+246*Math.cos(5.69-1114.6286*c-3.7*d-44*f)+205*Math.cos(1.02+14914.4523*c-1*d+6*f)+171*Math.cos(3.33+23871.4457*c+1*d+31*f)+152*Math.cos(4.94+6585.761*c-2*d-19*f)+130*Math.cos(.74-7700.389*c-2*d-25*f)+109*Math.cos(5.2+7771.377*c)+105*Math.cos(2.31+8956.993*c+1*d+25*f)+80*Math.cos(5.38-8538.241*c+2.8*d+26*f)+49*Math.cos(6.24+628.302*c)+35*Math.cos(2.7+22756.817*c-3*d-13*f)+31*Math.cos(4.1+16171.056*c-1*d+6*f)+24*
Math.cos(1.7+7842.365*c-2*d-19*f)+23*Math.cos(3.9+24986.074*c+5*d+75*f)+22*Math.cos(.4+14428.126*c-4*d-38*f)+17*Math.cos(2+8399.679*c);f/=6378.1366;c=b/365250;d=c*c;var g=10001399+167070*Math.cos(3.098464+6283.07585*c)+1396*Math.cos(3.0552+12566.1517*c)+10302*Math.cos(1.10749+6283.07585*c)*c+172*Math.cos(1.064+12566.152*c)*c+436*Math.cos(5.785+6283.076*c)*d+14*Math.cos(4.27+6283.08*c)*d*c;c=b/36525;d=7771-914*Math.sin(.785+8328.6914*c)-179*Math.sin(2.543+15542.7543*c)-160*Math.sin(.187+7214.0629*
c);b=-755*Math.sin(.057+8433.4662*c)-82*Math.sin(2.413+16762.1576*c);c=-27299*Math.sin(5.497+8328.691425*c)-4184*Math.sin(4.9+7214.06287*c)-7204*Math.sin(.972+15542.75429*c);d/=36525;b/=36525;var h=f*Math.sin(e)*d/Math.sqrt(b*b+d*d),k=.0023454792531567917*g-f;e=108.84969240000001/k;b=Math.abs(h);var l=Math.abs(.2725076-e*f);g=f-.2725076/e;h=1>b?Math.sqrt(1-h*h):0;a.lx=g<h?"T":"A";k=b-(.9972+(.2725076+109.3947076/k*f));.016>Math.abs(k)&&(a.ac=0);var m=b-(.9972+l);.016>Math.abs(m)&&(a.ac=0);var n=b-
.9972;.016>Math.abs(n)&&(a.ac=0);b-=.9972-l;.016>Math.abs(b)&&(a.ac=0);0<k?a.lx="N":0<m?a.lx="P":0<n?a.lx+="0":0<b?a.lx+="1":(.019>Math.abs(g-h)&&(a.ac=0),Math.abs(g)<h&&(c=c/36525*h/d/f,d=f-c-.2725076/e,f=f+c-.2725076/e,0<d&&(a.lx="H3"),0<f&&(a.lx="H2"),0<d&&0<f&&(a.lx="H"),.019>Math.abs(d)&&(a.ac=0),.019>Math.abs(f)&&(a.ac=0)));return a}
var rsGS={Zs:[],Zdt:.04,Zjd:0,dT:0,tanf1:.0046,tanf2:.0045,srad:.0046,bba:1,bhc:0,dyj:23500,init:function(b,a){if(suoN(b)!=suoN(this.Zjd)||this.Zs.length!=9*a){this.Zs.length=0;this.Zjd=b=36525*XL.MS_aLon_t2(suoN(b)*Math.PI*2);this.dT=dt_T(b);var e=nutation2(b/36525);b=hcjj(b/36525)+e[1];var c,d=this.Zs;for(c=0;c<a;c++){var f=(this.Zjd+(c-a/2+.5)*this.Zdt)/36525;if(7==a){var g=e_coord(f,-1,-1,-1);var h=m_coord(f,-1,-1,-1)}3==a&&(g=e_coord(f,65,65,65),h=m_coord(f,-1,150,150));2==a&&(g=e_coord(f,20,
20,20),h=m_coord(f,30,30,30));g[0]=g[0]+e[0]+gxc_sunLon(f)+Math.PI;g[1]=-g[1]+gxc_sunLat(f);h[0]=h[0]+e[0]+gxc_moonLon(f);h[1]+=gxc_moonLat(f);g=llrConv(g,b);h=llrConv(h,b);g[2]*=cs_AU;c&&g[0]<d[0]&&(g[0]+=pi2);c&&h[0]<d[3]&&(h[0]+=pi2);var k=9*c;d[k+0]=g[0];d[k+1]=g[1];d[k+2]=g[2];d[k+3]=h[0];d[k+4]=h[1];d[k+5]=h[2];g=llr2xyz(g);h=llr2xyz(h);var l=xyz2llr([g[0]-h[0],g[1]-h[1],g[2]-h[2]]);l[0]=Math.PI/2+l[0];l[1]=Math.PI/2-l[1];c&&l[0]<d[6]&&(l[0]+=pi2);d[k+6]=l[0];d[k+7]=l[1];d[k+8]=pGST(36525*f-
this.dT,this.dT)+e[0]*cos(b)}a=d.length-9;this.dyj=(d[2]+d[a+2]-d[5]-d[a+5])/2/cs_rEar;this.tanf1=(cs_k0+cs_k)/this.dyj;this.tanf2=(cs_k0-cs_k2)/this.dyj;this.srad=cs_k0/((d[2]+d[a+2])/2/cs_rEar);this.bba=Math.sin((d[1]+d[a+1])/2);this.bba=cs_ba*(1+(1-cs_ba2)*this.bba*this.bba/2);this.bhc=-atan(tan(b)*sin((d[6]+d[a+6])/2))}},chazhi:function(b,a){a*=3;var e=this.Zs.length/9;var c=this.Zs,d=[],f=c.length/e;b=(b-this.Zjd)/this.Zdt+e/2-.5;if(2==e){for(e=0;3>e;e++,a++)d[e]=c[a]+(c[a+f]-c[a])*b;return d}var g=
Math.floor(b+.5);0>=g&&(g=1);g>e-2&&(g=e-2);b-=g;a+=g*f;for(e=0;3>e;e++,a++)d[e]=c[a]+(c[a+f]-c[a-f]+(c[a+f]+c[a-f]-2*c[a])*b)*b/2;return d},sun:function(b){return this.chazhi(b,0)},moon:function(b){return this.chazhi(b,1)},bse:function(b){return this.chazhi(b,2)},cd2bse:function(b,a){b=[b[0]-a[0],b[1],b[2]];b=llrConv(b,-a[1]);return llr2xyz(b)},bse2cd:function(b,a){b=xyz2llr(b);b=llrConv(b,a[1]);b[0]=rad2mrad(b[0]+a[0]);return b},bse2db:function(b,a,e){b=xyz2llr(b);b=llrConv(b,a[1]);b[0]=rad2rrad(b[0]+
a[0]-a[2]);e&&(b[1]=atan(tan(b[1])/cs_ba2));return b},bseXY2db:function(b,a,e,c){b=lineEar2(b,a,2,b,a,0,c?cs_ba:1,1,e);return[b.J,b.W]},bseM:function(b){b=this.cd2bse(this.chazhi(b,1),this.chazhi(b,2));b[0]/=cs_rEar;b[1]/=cs_rEar;b[2]/=cs_rEar;return b},Vxy:function(b,a,e,c,d){var f={},g=1-b*b-a*a;g=0>g?0:sqrt(g);f.vx=pi2*(sin(e)*g-cos(e)*a);f.vy=pi2*b*cos(e);f.Vx=c-f.vx;f.Vy=d-f.vy;f.V=sqrt(f.Vx*f.Vx+f.Vy*f.Vy);return f},rSM:function(b){var a={};a.r1=cs_k+this.tanf1*b;a.r2=cs_k2-this.tanf2*b;a.ar2=
abs(a.r2);a.sf=cs_k2/b/cs_k0*(this.dyj+b);return a},qrd:function(b,a,e,c){var d=this.bba*this.bba,f=this.bseM(b),g=f[0],h=f[1],k=this.rSM(f[2]);f=0;1==c&&(f=k.r1);c=1-(1/d-1)*h*h/(g*g+h*h)/2+f;k=(c*c-g*g-h*h)/(a*g+e*h)/2;g+=k*a;h+=k*e;b+=k;a=(1-d)*f*g*h/c/c/c;g+=a*h;g=this.bse2db([g/c,(h-a*g)/c,0],this.bse(b),1);g[2]=b;return g},feature:function(b){b=this.Zjd;var a={};var e=this.bseM(b-.04),c=this.bseM(b),d=this.bseM(b+.04),f=(d[0]-e[0])/.04/2,g=(d[1]-e[1])/.04/2;var h=(d[2]-e[2])/.04/2;var k=(d[0]+
e[0]-2*c[0])/.04/.04;e=(d[1]+e[1]-2*c[1])/.04/.04;var l=Math.sqrt(f*f+g*g);a.jdSuo=b;a.dT=this.dT;a.ds=this.bhc;a.vx=f;a.vy=g;a.ax=k;a.ay=e;a.v=l;a.k=g/f;var m=-(c[0]*f+c[1]*g)/(l*l);a.jd=b+m;a.xc=c[0]+f*m;a.yc=c[1]+g*m;a.zc=c[2]+h*m-1.37*m*m;a.D=(f*c[1]-g*c[0])/l;a.d=Math.abs(a.D);a.I=this.bse(a.jd);k=lineEar2(a.xc,a.yc,2,a.xc,a.yc,0,cs_ba,1,a.I);var n,q;e=d=n=q=this.rSM(a.zc);100!=k.W&&(d=this.rSM(a.zc-k.R2));if(1>a.d){var p=sqrt(1-a.d*a.d)/l;var r=m-p;var t=m+p;n=this.rSM(r*h+c[2]-1.37*r*r);q=
this.rSM(t*h+c[2]-1.37*t*t)}h=1;p=0;a.d<h&&(p=sqrt(h*h-a.d*a.d)/l);r=m-p;t=m+p;h=1+e.r1;p=0;a.d<h&&(p=sqrt(h*h-a.d*a.d)/l);h=m-p;l=m+p;m=-c[0]/f;1>a.d?(a.gk1=this.qrd(r+b,f,g,0),a.gk2=this.qrd(t+b,f,g,0)):(a.gk1=[0,0,0],a.gk2=[0,0,0]);a.gk3=this.qrd(h+b,f,g,1);a.gk4=this.qrd(l+b,f,g,1);a.gk5=this.bseXY2db(m*f+c[0],m*g+c[1],this.bse(m+b),1);a.gk5[2]=m+b;100==k.W?(h=this.bse2db([a.xc,a.yc,0],a.I,0),a.zxJ=h[0],a.zxW=h[1],a.sf=(e.r1-(a.d-.9972))/(e.r1-e.r2),a.lx=a.d>.9972+e.r1?"N":a.d>.9972+e.ar2?"P":
1>e.sf?"A0":"T0"):(a.zxJ=k.J,a.zxW=k.W,a.sf=d.sf,a.d>.9966-d.ar2?a.lx=1>d.sf?"A1":"T1":1<=d.sf?(a.lx="H",1<n.sf&&(a.lx="H2"),1<q.sf&&(a.lx="H3"),1<n.sf&&1<q.sf&&(a.lx="T")):a.lx="A");a.Sdp=CD2DP(this.sun(a.jd),a.zxJ,a.zxW,a.I[2]);100!=k.W?(a.dw=abs(2*d.r2*cs_rEar)/sin(a.Sdp[1]),h=this.Vxy(a.xc,a.yc,a.I[1],a.vx,a.vy),a.tt=2*abs(d.r2)/h.V):a.dw=a.tt=0;return a},push:function(b,a){a[a.length]=b[0];a[a.length]=b[1]},elmCpy:function(b,a,e,c){e.length&&(-2==a&&(a=b.length),-2==c&&(c=e.length),-1==a&&(a=
b.length-2),-1==c&&(c=e.length-2),b[a]=e[c],b[a+1]=e[c+1])},nanbei:function(b,a,e,c,d,f){var g=b[0]-e/a*d*c,h=b[1]+c*d,k,l=0;for(k=0;3>k;k++){var m=1-g*g-h*h;if(0>m){if(l)break;m=0;l++}m=Math.sqrt(m);g-=(g-b[0])*m/b[2];h-=(h-b[1])*m/b[2];h=a-pi2*(sin(f[1])*m-cos(f[1])*h);var n=e-pi2*cos(f[1])*g;g=Math.sqrt(h*h+n*n);n=c*n/g;var q=c*h/g;g=b[0]-d*n;h=b[1]+d*q}b=lineEar2(b[0]-cs_k*n,b[1]+cs_k*q,b[2],g,h,0,cs_ba,1,f);return[b.J,b.W,g,h]},mQie:function(b,a,e,c,d,f,g){b=this.nanbei(b,a,e,c,d,f);g.f2||(g.f2=
0);g.f=100==b[1]?0:1;g.f2!=g.f&&(d=lineOvl(b[2],b[3],a,e,1,this.bba),d.n&&(g.f?(c=d.R2,d=d.B):(c=d.R1,d=d.A),d[2]=0,this.push(this.bse2db(d,[f[0],f[1],f[2]-c/Math.sqrt(a*a+e*e)*6.28],1),g)));g.f2=g.f;100!=b[1]&&this.push(b,g)},mDian:function(b,a,e,c,d,f,g){var h,k=b;for(h=0;2>h;h++){var l=this.Vxy(k[0],k[1],f[1],a,e);l=lineOvl(b[0],b[1],l.Vy,-l.Vx,1,this.bba);if(!l.n)break;if(c){k=l.A;var m=l.R1}else k=l.B,m=l.R2}return l.n&&m<=d?(k=this.bse2db([k[0],k[1],0],f,1),this.push(k,g),1):0},jieX:function(b){b=
this.feature(b);b.p1=[];b.p2=[];b.p3=[];b.p4=[];b.q1=[];b.q2=[];b.q3=[];b.q4=[];b.L1=[];b.L2=[];b.L3=[];b.L4=[];b.L5=[];b.L6=[];b.L0=[];var a=1.7*1.7-b.d*b.d;0>a&&(a=0);a=Math.sqrt(a)/b.v+.01;var e=b.jd-a,c=2*a/400,d=0,f=0,g=b.q1,h=b.q2;this.push([0,0],b.q2);this.push([0,0],b.q3);this.push([0,0],b.q4);for(a=0;400>=a;a++,e+=c){var k=b.vx+b.ax*(e-b.jdSuo),l=b.vy+b.ay*(e-b.jdSuo),m=this.bseM(e),n=this.rSM(m[2]),q=n.r1,p=this.bse(e);var r=cirOvl(1,this.bba,q,m[0],m[1]);d%2?r.n||d++:r.n&&d++;r.n&&(r.A[2]=
r.B[2]=0,r.A=this.bse2db(r.A,p,1),r.B=this.bse2db(r.B,p,1),1==d&&(this.push(r.A,b.p1),this.push(r.B,b.p2)),3==d&&(this.push(r.A,b.p3),this.push(r.B,b.p4)));!this.mDian(m,k,l,0,q,p,g)&&0<g.length&&(g=b.q3);!this.mDian(m,k,l,1,q,p,h)&&2<h.length&&(h=b.q4);e>b.jd&&(0==g.length&&(g=b.q3),2==h.length&&(h=b.q4));r=this.bseXY2db(m[0],m[1],p,1);if(100!=r[1]&&0==f||100==r[1]&&1==f){var t=lineOvl(m[0],m[1],k,l,1,this.bba);if(0==f){var x=t.R2;t=t.B}else x=t.R1,t=t.A;t[2]=0;this.push(this.bse2db(t,[p[0],p[1],
p[2]-x/Math.sqrt(k*k+l*l)*6.28],1),b.L0);f++}100!=r[1]&&this.push(r,b.L0);this.mQie(m,k,l,1,q,p,b.L1);this.mQie(m,k,l,-1,q,p,b.L2);this.mQie(m,k,l,1,n.r2,p,b.L3);this.mQie(m,k,l,-1,n.r2,p,b.L4);this.mQie(m,k,l,1,(q+n.r2)/2,p,b.L5);this.mQie(m,k,l,-1,(q+n.r2)/2,p,b.L6)}this.elmCpy(b.q3,0,b.q1,-1);this.elmCpy(b.q4,0,b.q2,-1);this.elmCpy(b.q1,-2,b.L1,0);this.elmCpy(b.q2,-2,b.L2,0);this.elmCpy(b.q3,0,b.L1,-1);this.elmCpy(b.q4,0,b.L2,-1);this.elmCpy(b.q2,0,b.q1,0);this.elmCpy(b.q3,-2,b.q4,-1);return b},
jieX2:function(b){var a={},e=[],c=[],d=[];if(.5<abs(b-this.Zjd))return a;var f=this.sun(b),g=this.bseM(b),h=this.rSM(g[2]);b=this.bse(b);var k=g[2];var l=g[0]*g[0]+g[1]*g[1];var m=l-h.r2*h.r2,n=l-h.r1*h.r1;for(l=0;200>l;l++){var q=l/200*pi2;var p=cos(q),r=sin(q);var t=g[0]+cs_k*p;var x=g[1]+cs_k*r;var v=g[0]+h.r2*p;var w=g[1]+h.r2*r;var u=lineEar2(t,x,k,v,w,0,cs_ba,1,b);100!=u.W?this.push([u.J,u.W],e):sqrt(v*v+w*w)>m&&this.push(this.bse2db([v,w,0],b,1),e);v=g[0]+h.r1*p;w=g[1]+h.r1*r;u=lineEar2(t,
x,k,v,w,0,cs_ba,1,b);100!=u.W?this.push([u.J,u.W],c):sqrt(v*v+w*w)>n&&this.push(this.bse2db([v,w,0],b,1),c);u=llrConv([q,0,0],pi_2-f[1]);u[0]=rad2rrad(u[0]+f[0]+pi_2-b[2]);this.push(u,d)}e[e.length]=e[0];e[e.length]=e[1];c[c.length]=c[0];c[c.length]=c[1];d[d.length]=d[0];d[d.length]=d[1];a.p1=e;a.p2=c;a.p3=d;return a},jieX3:function(b){var a=this.feature(b),e=Math.floor(1440*a.jd)/1440-.125,c=1/1440,d="";for(b=0;360>b;b++,e+=c){var f=a.vx+a.ax*(e-a.jdSuo),g=a.vy+a.ay*(e-a.jdSuo),h=this.bseM(e),k=
this.rSM(h[2]),l=k.r1,m=this.bse(e);var n=JD.JD2str(e+J2000)+" ";var q=0;var p=this.nanbei(h,f,g,1,l,m);100!=p[1]?(n+=rad2str2(p[0])+" "+rad2str2(p[1])+"|",q++):n+="-------------------|";p=this.nanbei(h,f,g,1,k.r2,m);100!=p[1]?(n+=rad2str2(p[0])+" "+rad2str2(p[1])+"|",q++):n+="-------------------|";p=this.bseXY2db(h[0],h[1],m,1);100!=p[1]?(n+=rad2str2(p[0])+" "+rad2str2(p[1])+"|",q++):n+="-------------------|";p=this.nanbei(h,f,g,-1,k.r2,m);100!=p[1]?(n+=rad2str2(p[0])+" "+rad2str2(p[1])+"|",q++):
n+="-------------------|";p=this.nanbei(h,f,g,-1,l,m);100!=p[1]?(n+=rad2str2(p[0])+" "+rad2str2(p[1])+" ",q++):n+="------------------- ";q&&(d+=n+"\x3cbr\x3e")}return"\x3cpre\x3e\u65f6\u95f4(\u529b\u5b66\u65f6) \u534a\u5f71\u5317\u754c\u9650 \u672c\u5f71\u5317\u754c\u7ebf \u4e2d\u5fc3\u7ebf \u672c\u5f71\u5357\u754c\u7ebf \u534a\u5f71\u5357\u754c\u7ebf\uff0c(\u4f2a\u672c\u5f71\u5357\u5317\u754c\u5e94\u4e92\u6362)\x3cbr\x3e"+d+"\x3c/pre\x3e"}},rsPL={nasa_r:0,sT:[],secXY:function(b,a,e,c,d){var f=dt_T(b),
g=nutation2(b/36525);g=pGST(b-f,f)+g[0]*Math.cos(hcjj(b/36525)+g[1]);f=rsGS.moon(b);d.mCJ=f[0];d.mCW=f[1];d.mR=f[2];var h=rad2rrad(g+a-f[0]);parallax(f,h,e,c);d.mCJ2=f[0];d.mCW2=f[1];d.mR2=f[2];f=rsGS.sun(b);d.sCJ=f[0];d.sCW=f[1];d.sR=f[2];a=rad2rrad(g+a-f[0]);parallax(f,a,e,c);d.sCJ2=f[0];d.sCW2=f[1];d.sR2=f[2];d.mr=cs_sMoon/d.mR2/rad;d.sr=959.63/d.sR2/rad*cs_AU;this.nasa_r&&(d.mr*=cs_sMoon2/cs_sMoon);d.x=rad2rrad(d.mCJ2-d.sCJ2)*Math.cos((d.mCW2+d.sCW2)/2);d.y=d.mCW2-d.sCW2;d.t=b},lineT:function(b,
a,e,c,d){var f=b.y*a-b.x*e,g=e*e+a*a;e*=f;c=e*e-g*(f*f-c*c*a*a);if(0>c)return 0;c=Math.sqrt(c);d||(c=-c);return b.t+((-e+c)/g-b.x)/a},secMax:function(b,a,e,c){var d;for(d=0;5>d;d++)this.sT[d]=0;this.LX="";this.sf3=this.sf2=this.sf=0;this.sflx=" ";this.b1=1;this.sun_s=this.sun_j=this.P2=this.V2=this.P1=this.V1=this.dur=0;rsGS.init(b,7);b=rsGS.Zjd;var f={},g={};this.secXY(b,a,e,c,f);b-=f.x/.2128;var h=60/86400;for(d=0;2>d;d++){if("err"==this.secXY(b,a,e,c,f)||"err"==this.secXY(b+h,a,e,c,g))return;var k=
(g.y-f.y)/h;var l=(g.x-f.x)/h;var m=-(f.y*k+f.x*l)/(k*k+l*l);b+=m}this.sun_s=sunShengJ(b-dt_T(b)+a/pi2,a,e,-1)+dt_T(b);this.sun_j=sunShengJ(b-dt_T(b)+a/pi2,a,e,1)+dt_T(b);d=f.x+m*l;m=f.y+m*k;m=Math.sqrt(d*d+m*m);if(m<=f.mr+f.sr){this.sT[1]=b;this.LX="\u504f";this.sf=(f.mr+f.sr-m)/f.sr/2;this.b1=f.mr/f.sr;this.secXY(this.sun_s,a,e,c,g);this.sf2=(g.mr+g.sr-Math.sqrt(g.x*g.x+g.y*g.y))/g.sr/2;0>this.sf2&&(this.sf2=0);this.secXY(this.sun_j,a,e,c,g);this.sf3=(g.mr+g.sr-Math.sqrt(g.x*g.x+g.y*g.y))/g.sr/
2;0>this.sf3&&(this.sf3=0);this.sT[0]=this.lineT(f,l,k,f.mr+f.sr,0);for(d=0;3>d;d++)this.secXY(this.sT[0],a,e,c,g),this.sT[0]=this.lineT(g,l,k,g.mr+g.sr,0);this.P1=rad2mrad(atan2(g.x,g.y));this.V1=rad2mrad(this.P1-shiChaJ(pGST2(this.sT[0]),a,e,g.sCJ,g.sCW));this.sT[2]=this.lineT(f,l,k,f.mr+f.sr,1);for(d=0;3>d;d++)this.secXY(this.sT[2],a,e,c,g),this.sT[2]=this.lineT(g,l,k,g.mr+g.sr,1);this.P2=rad2mrad(atan2(g.x,g.y));this.V2=rad2mrad(this.P2-shiChaJ(pGST2(this.sT[2]),a,e,g.sCJ,g.sCW))}m<=f.mr-f.sr&&
(this.LX="\u5168",this.sT[3]=this.lineT(f,l,k,f.mr-f.sr,0),this.secXY(this.sT[3],a,e,c,g),this.sT[3]=this.lineT(g,l,k,g.mr-g.sr,0),this.sT[4]=this.lineT(f,l,k,f.mr-f.sr,1),this.secXY(this.sT[4],a,e,c,g),this.sT[4]=this.lineT(g,l,k,g.mr-g.sr,1),this.dur=this.sT[4]-this.sT[3]);m<=f.sr-f.mr&&(this.LX="\u73af",this.sT[3]=this.lineT(f,l,k,f.sr-f.mr,0),this.secXY(this.sT[3],a,e,c,g),this.sT[3]=this.lineT(g,l,k,g.sr-g.mr,0),this.sT[4]=this.lineT(f,l,k,f.sr-f.mr,1),this.secXY(this.sT[4],a,e,c,g),this.sT[4]=
this.lineT(g,l,k,g.sr-g.mr,1),this.dur=this.sT[4]-this.sT[3]);this.sT[1]<this.sun_s&&0<this.sf2&&(this.sf=this.sf2,this.sflx="#");this.sT[1]>this.sun_j&&0<this.sf3&&(this.sf=this.sf3,this.sflx="*");for(d=0;5>d;d++)if(this.sT[d]<this.sun_s||this.sT[d]>this.sun_j)this.sT[d]=0;this.sun_s-=dt_T(b);this.sun_j-=dt_T(b)},A:[],B:[],P:{S:[],M:[],g:0},Q:{S:[],M:[],g:0},V:[],Vc:"",Vb:"",zb0:function(b){var a=dt_T(b),e=hcjj(b/36525),c=nutation2(b/36525);this.P.g=pGST(b-a,a)+c[0]*Math.cos(e+c[1]);this.P.S=rsGS.sun(b);
this.P.M=rsGS.moon(b);b+=60/86400;this.Q.g=pGST(b-a,a)+c[0]*Math.cos(e+c[1]);this.Q.S=rsGS.sun(b);this.Q.M=rsGS.moon(b);a=llr2xyz(this.P.S);e=llr2xyz(this.P.M);c=959.63/cs_sMoon*cs_AU;b=[(a[0]-e[0])/(1-c)+e[0],(a[1]-e[1])/(1-c)+e[1],(a[2]-e[2])/(1-c)+e[2]];this.A=xyz2llr(b);b=[(a[0]-e[0])/(1+c)+e[0],(a[1]-e[1])/(1+c)+e[1],(a[2]-e[2])/(1+c)+e[2]];this.B=xyz2llr(b)},zbXY:function(b,a,e){var c=[b.S[0],b.S[1],b.S[2]],d=[b.M[0],b.M[1],b.M[2]];parallax(c,b.g+a-b.S[0],e,0);parallax(d,b.g+a-b.M[0],e,0);b.mr=
cs_sMoon/d[2]/rad;b.sr=959.63/c[2]/rad*cs_AU;b.x=rad2rrad(d[0]-c[0])*Math.cos((d[1]+c[1])/2);b.y=d[1]-c[1]},p2p:function(b,a,e,c,d){var f=this.P,g=this.Q;this.zbXY(this.P,b,a);this.zbXY(this.Q,b,a);b=g.y-f.y;var h=g.x-f.x;g=Math.sqrt(b*b+h*h);a=959.63/f.S[2]/rad*cs_AU;h=f.S[1]+d*a*h/g;c=lineEar([f.S[0]-d*a*b/g/Math.cos((h+f.S[1])/2),h,f.S[2]],c?this.A:this.B,f.g);e.J=c.J;e.W=c.W},pp0:function(b){var a=this.P,e=lineEar(a.M,a.S,a.g);b.J=e.J;b.W=e.W;100==b.W?b.c="":(b.c="\u5168",this.zbXY(a,b.J,b.W),
a.sr>a.mr&&(b.c="\u73af"))},nbj:function(b){rsGS.init(b,7);var a,e={},c=this.V;for(a=0;10>a;a++)c[a]=100;this.Vb=this.Vc="";this.zb0(b);this.pp0(e);c[0]=e.J;c[1]=e.W;this.Vc=e.c;for(a=e.J=e.W=0;2>a;a++)this.p2p(e.J,e.W,e,1,1);c[2]=e.J;c[3]=e.W;for(a=e.J=e.W=0;2>a;a++)this.p2p(e.J,e.W,e,1,-1);c[4]=e.J;c[5]=e.W;for(a=e.J=e.W=0;3>a;a++)this.p2p(e.J,e.W,e,0,-1);c[6]=e.J;c[7]=e.W;for(a=e.J=e.W=0;3>a;a++)this.p2p(e.J,e.W,e,0,1);c[8]=e.J;c[9]=e.W;100!=c[3]&&100!=c[5]&&(b=(c[2]-c[4])*Math.cos((c[3]+c[5])/
2),c=c[3]-c[5],this.Vb=(cs_rEarA*Math.sqrt(b*b+c*c)).toFixed(0)+"\u5343\u7c73")}};